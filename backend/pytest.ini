[tool:pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function
addopts = -v --tb=short --disable-socket --allow-unix-socket --allow-hosts=127.0.0.1,localhost,::1

# pytest-socket configuration:
# --disable-socket: Block all network access by default
# --allow-unix-socket: Allow Unix domain sockets (needed for SQLite, etc.)
# --allow-hosts: Whitelist localhost for test server
#
# If tests fail with socket errors, check:
# 1. CHROMA_SERVER_HOST should be empty (embedded mode)
# 2. No accidental external API calls (should be mocked via TEST_MODE)
# 3. Add hosts to --allow-hosts if truly needed
